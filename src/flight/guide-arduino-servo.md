---
title: Arduino 控制舵机教程
icon: config
category:
 - 教程
---

@include(../flight/intro-arduino.md{8-36})

## [Arduino IDE 安装教程](/flight/intro-arduino.md#arduino-安装)

详见 [Arduino IDE 安装](/flight/intro-arduino.md#arduino-安装)

## 舵机简单介绍

接下来我们来介绍舵机的相关知识！

下面是SG90舵机的图片：

![](/assets/pics/Servo1-SG90.jpg =x300)

### 舵机

舵机并非是简单的电机，它是由**直流电机**、**减速齿轮**、**控制电路板**、**电位器**组成的**自控系统**。

![](/assets/pics/servo2.1.png =x300)

### 舵机的工作原理

![](/assets/pics/servo2.0.png =x300)

舵机工作原理是发出的脉冲讯号传给舵机，经由控制电路板驱动电机开始转动，通过减速齿轮组将动力传至摆臂部分，同时由电位器发送角度信号，判断摆臂是否达到预设角度。如果没有达到特定角度，电位器会通过电压变化回传至控制电路，通过传回的偏差控制电路会调整电机输出，使其与目标角度匹配，从而形成一个`闭环控制`。

SG90中电位器其实是一个角度电阻，通过角度变化来改变电阻阻值。

以上面的SG90舵机举例，其==三根引线==：**棕色**、**红色**、**黄色**分别对应**负极**、**正极**、**信号**。其连接到开发板上十分的简单，对应引脚相连即可。**不同厂家生产的舵机接线颜色可能有差别，但一般情况下是如上文所说**

>**舵机与直流电机的区别**
直流电机接线只有两根，舵机就有三根接线。使用上因为舵机有根信号线，所以舵机可以旋转特定任意角度。而直流电机只能正转或反转，并且无法反馈角度信息（**除了带有编码器的直流电机**）。

### PWM

>什么是PWM：
**PWM**是指的是脉宽调制，是将模拟电平信号转化为数字编码信号。
**占空比**：PWM信号保持高电平时间占脉冲信号时间的百分比。
**PWM的周期**：信号从高电平到低电平（一个脉冲信号的时间）。
**脉宽时间**：高电平的时间。

舵机的信号线中传输的是==PWM==信号，这种信号是一种周期为**20ms**的**方波信号**。

| 角度 | 高电平 |占空比|
| --- | --- |---|
| 0 | 0.5ms | 2.5% （250） |
| 45 | 1ms | 5% （500）|
| 90 | 1.5ms | 7.5% （750） |
| 135 | 2ms | 10% （1000）|
| 180 | 2.5ms | 12.5% （1250） |

![](/assets/pics/servo2.2.png =x300)

### 如何驱动舵机

这是一个Arduino的简单例程：

```test
#include<Servo.h>
Servo myservo;
void setup()
{
  myservo.attach(8);  #接8引脚
}
void loop()
{
 myservo.write(0);  #0°
 delay (1000);
 myservo.write(180);  #180°
 delay(1000) ;
}
```
